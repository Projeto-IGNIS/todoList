<div class="boards-layout">
  <!-- Sidebar -->
  <aside class="sidebar" [class.hidden]="!showSidebar">
    <div class="sidebar-header">
      <div class="logo">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 11l3 3L22 4"></path>
          <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
        </svg>
        <h2>To-Do List</h2>
      </div>
      <button class="btn-icon" (click)="toggleSidebar()" title="Fechar menu">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>

    <div class="sidebar-content">
      <div class="boards-section">
        <div class="section-header">
          <h3>Meus Boards</h3>
          <button class="btn-add" (click)="openCreateModal()" title="Criar novo board">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="12" y1="5" x2="12" y2="19"></line>
              <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
          </button>
        </div>

        <div class="boards-list" *ngIf="boards.length > 0">
          <div
            *ngFor="let board of boards"
            class="board-item"
            [class.active]="selectedBoard?.id === board.id"
            (click)="selectBoard(board)"
          >
            <div class="board-info">
              <span class="board-title">{{ board.title }}</span>
            </div>
            <div class="board-actions">
              <button
                class="btn-icon-small"
                [class.favorite]="board.favorite"
                (click)="toggleFavorite(board, $event)"
                title="Favoritar"
              >
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" [attr.fill]="board.favorite ? 'currentColor' : 'none'" stroke="currentColor" stroke-width="2">
                  <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
                </svg>
              </button>
              <button class="btn-icon-small" (click)="deleteBoard(board, $event)" title="Excluir">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                </svg>
              </button>
            </div>
          </div>
        </div>

        <div class="empty-state" *ngIf="boards.length === 0 && !isLoading">
          <p>Nenhum board criado ainda.</p>
          <p>Clique em + para criar seu primeiro board!</p>
        </div>
      </div>
    </div>

    <div class="sidebar-footer">
      <button class="btn-logout" (click)="logout()">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
          <polyline points="16 17 21 12 16 7"></polyline>
          <line x1="21" y1="12" x2="9" y2="12"></line>
        </svg>
        Sair
      </button>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <button class="btn-toggle-sidebar" *ngIf="!showSidebar" (click)="toggleSidebar()">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="3" y1="12" x2="21" y2="12"></line>
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </button>

    <div *ngIf="isLoading" class="loading-container">
      <div class="loading-spinner"></div>
      <p>Carregando...</p>
    </div>

    <div *ngIf="!isLoading && selectedBoard" class="board-content">
      <app-task-list-view [board]="selectedBoard"></app-task-list-view>
    </div>

    <div *ngIf="!isLoading && !selectedBoard" class="no-board-selected">
      <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
        <polyline points="9 22 9 12 15 12 15 22"></polyline>
      </svg>
      <h2>Selecione um board</h2>
      <p>Escolha um board na barra lateral para visualizar suas tarefas</p>
    </div>
  </main>

  <!-- Create Board Modal -->
  <div class="modal-overlay" *ngIf="showCreateModal" (click)="closeCreateModal()">
    <div class="modal" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>Criar Novo Board</h3>
        <button class="btn-icon" (click)="closeCreateModal()">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="boardTitle">TÃ­tulo do Board</label>
          <input
            type="text"
            id="boardTitle"
            [(ngModel)]="newBoardTitle"
            placeholder="Ex: Projeto Pessoal, Trabalho, Estudos..."
            (keyup.enter)="createBoard()"
            autofocus
          />
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" (click)="closeCreateModal()">Cancelar</button>
        <button class="btn-primary" (click)="createBoard()" [disabled]="!newBoardTitle.trim()">
          Criar Board
        </button>
      </div>
    </div>
  </div>
</div>
